{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/refs.js","../src/js/loader-btn.js","../src/js/loader.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"46809919-8ae2f3dd2d3333d4ada30ded2\";\n\nexport async function fetchImages(query = \"dogs\", page = 1) {\n    const response = await axios(`https://pixabay.com/api/`, {\n        params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        per_page: 15,\n        page,\n    },\n});\n    return response.data;\n};\n\n\n   \n\n\n\n\n\n\n\n\n\n\n\n","export const refs = {\n     loadMore: document.querySelector(\".js-load-more\"),\n     form: document.querySelector(\".search-form\"),\n     list: document.querySelector(\".list\"),\n     loader: document.querySelector(\".loader\"),\n};","import { refs } from \"./refs\";\n\nexport function showBtn() {\n  refs.loadMore.classList.remove('is-hidden');\n}\n\nexport function hideBtn() {\n  refs.loadMore.classList.add('is-hidden');\n}","import { refs } from \"./refs\";\n\nexport function showLoader() {\n    refs.loader.style.display = \"block\";\n}\n\nexport function hideLoader() {\n    refs.loader.style.display = \"none\";\n}","export function createMarkUp(arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n     <li class=\"list-item\">\n     <a href=\"${largeImageURL}\">\n         <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\"/>\n     </a>\n        <div class=\"info\">\n        <p>â¤ï¸ ${likes}</p>\n        <p>ğŸ‘ï¸${views}</p>\n        <p>ğŸ’¬${comments}</p>\n        <p>â¬‡ï¸${downloads}</p>\n        </div>\n     </li>\n    ` ).join(\"\")\n}","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { showBtn, hideBtn } from \"./js/loader-btn.js\";\nimport { showLoader, hideLoader } from \"./js/loader.js\";\nimport { refs } from \"./js/refs.js\";\nimport { createMarkUp } from \"./js/render-functions.js\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox = new SimpleLightbox('.list a', {\n    captionsData: 'alt', \n    captionDelay: 250, \n});\n\nconst perPage = 15;\nlet page = 1;\nlet currentQuery = \"\";\n\n\n\nrefs.form.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    refs.list.innerHTML = \"\";\n    showLoader();\n    page = 1;\n\n    currentQuery = event.target.elements.query.value.trim();\n\n    if (!currentQuery) return;\n    hideBtn();\n    \n    try {\n        const response = await fetchImages(currentQuery, page);\n        refs.list.insertAdjacentHTML(\"beforeend\", createMarkUp(response.hits));\n        lightbox.refresh();\n\n        if (response.hits.length < perPage || page === Math.ceil(response.total / perPage)) {\n            hideBtn();\n        } else {\n            showBtn();\n        }\n\n    } catch (error) {\n        console.log(error);\n    }\n    finally {\n        hideLoader();\n    }\n});\n\n\nrefs.loadMore.addEventListener(\"click\", onLoadMore)\n\n\nexport async function onLoadMore(event) {\n    page += 1;\n    showLoader();\n    hideBtn();\n    \n    try {\n        const response = await fetchImages(currentQuery, page);\n        refs.list.insertAdjacentHTML('beforeend', createMarkUp(response.hits));\n        lightbox.refresh();\n        const lastPage = Math.ceil(response.total / perPage);\n        lastPage === page ? hideBtn() : showBtn();\n    } catch (err) {\n        console.log(\"Error:\", err);\n    } finally {\n        hideLoader();\n    }\n    \n}\n\n"],"names":["API_KEY","fetchImages","query","page","axios","refs","showBtn","hideBtn","showLoader","hideLoader","createMarkUp","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","perPage","currentQuery","event","response","error","onLoadMore","err"],"mappings":"6vBAEA,MAAMA,EAAU,qCAET,eAAeC,EAAYC,EAAQ,OAAQC,EAAO,EAAG,CAYxD,OAXiB,MAAMC,EAAM,2BAA4B,CACrD,OAAQ,CACR,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAAC,CACH,CACL,CAAC,GACmB,IACpB,CCjBO,MAAME,EAAO,CACf,SAAU,SAAS,cAAc,eAAe,EAChD,KAAM,SAAS,cAAc,cAAc,EAC3C,KAAM,SAAS,cAAc,OAAO,EACpC,OAAQ,SAAS,cAAc,SAAS,CAC7C,ECHO,SAASC,GAAU,CACxBD,EAAK,SAAS,UAAU,OAAO,WAAW,CAC5C,CAEO,SAASE,GAAU,CACxBF,EAAK,SAAS,UAAU,IAAI,WAAW,CACzC,CCNO,SAASG,GAAa,CACzBH,EAAK,OAAO,MAAM,QAAU,OAChC,CAEO,SAASI,GAAa,CACzBJ,EAAK,OAAO,MAAM,QAAU,MAChC,CCRO,SAASK,EAAaC,EAAK,CAC9B,OAAOA,EAAI,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,gBAEjFL,CAAa;AAAA,qBACRD,CAAY,UAAUE,CAAI,YAAYA,CAAI;AAAA;AAAA;AAAA,gBAG/CC,CAAK;AAAA,gBACLC,CAAK;AAAA,eACNC,CAAQ;AAAA,eACRC,CAAS;AAAA;AAAA;AAAA,KAGjB,EAAC,KAAK,EAAE,CACf,CCNA,IAAIC,EAAW,IAAIC,EAAe,UAAW,CACzC,aAAc,MACd,aAAc,GAClB,CAAC,EAED,MAAMC,EAAU,GAChB,IAAIlB,EAAO,EACPmB,EAAe,GAInBjB,EAAK,KAAK,iBAAiB,SAAU,MAAOkB,GAAU,CAQlD,GAPAA,EAAM,eAAc,EACpBlB,EAAK,KAAK,UAAY,GACtBG,IACAL,EAAO,EAEPmB,EAAeC,EAAM,OAAO,SAAS,MAAM,MAAM,OAE7C,EAACD,EACL,CAAAf,IAEA,GAAI,CACA,MAAMiB,EAAW,MAAMvB,EAAYqB,EAAcnB,CAAI,EACrDE,EAAK,KAAK,mBAAmB,YAAaK,EAAac,EAAS,IAAI,CAAC,EACrEL,EAAS,QAAO,EAEZK,EAAS,KAAK,OAASH,GAAWlB,IAAS,KAAK,KAAKqB,EAAS,MAAQH,CAAO,EAC7Ed,IAEAD,GAGP,OAAQmB,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACpB,QACO,CACJhB,GACH,EACL,CAAC,EAGDJ,EAAK,SAAS,iBAAiB,QAASqB,CAAU,EAG3C,eAAeA,EAAWH,EAAO,CACpCpB,GAAQ,EACRK,IACAD,IAEA,GAAI,CACA,MAAMiB,EAAW,MAAMvB,EAAYqB,EAAcnB,CAAI,EACrDE,EAAK,KAAK,mBAAmB,YAAaK,EAAac,EAAS,IAAI,CAAC,EACrEL,EAAS,QAAO,EACC,KAAK,KAAKK,EAAS,MAAQH,CAAO,IACtClB,EAAOI,EAAS,EAAGD,EAAO,CAC1C,OAAQqB,EAAK,CACV,QAAQ,IAAI,SAAUA,CAAG,CACjC,QAAc,CACNlB,GACH,CAEL"}